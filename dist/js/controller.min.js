!function(e){function t(i){if(o[i])return o[i].exports;var n=o[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};t.m=e,t.c=o,t.d=function(e,o,i){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}({8:function(e,t){!function(e){"use strict";function t(e,t){var o=this;o.model=e,o.view=t,o.view.bind("newTodo",function(e){o.addItem(e)}),o.view.bind("itemEdit",function(e){o.editItem(e.id)}),o.view.bind("itemEditDone",function(e){o.editItemSave(e.id,e.title)}),o.view.bind("itemEditCancel",function(e){o.editItemCancel(e.id)}),o.view.bind("itemRemove",function(e){o.removeItem(e.id)}),o.view.bind("itemToggle",function(e){o.toggleComplete(e.id,e.completed)}),o.view.bind("removeCompleted",function(){o.removeCompletedItems()}),o.view.bind("toggleAll",function(e){o.toggleAll(e.completed)})}t.prototype.setView=function(e){var t=e.split("/")[1],o=t||"";this._updateFilterState(o)},t.prototype.showAll=function(){var e=this;e.model.read(function(t){e.view.render("showEntries",t)})},t.prototype.showActive=function(){var e=this;e.model.read({completed:!1},function(t){e.view.render("showEntries",t)})},t.prototype.showCompleted=function(){var e=this;e.model.read({completed:!0},function(t){e.view.render("showEntries",t)})},t.prototype.addItem=function(e){var t=this;""!==e.trim()&&t.model.create(e,function(){t.view.render("clearNewTodo"),t._filter(!0)})},t.prototype.editItem=function(e){var t=this;t.model.read(e,function(o){t.view.render("editItem",{id:e,title:o[0].title})})},t.prototype.editItemSave=function(e,t){for(var o=this;" "===t[0];)t=t.slice(1),console.log(t);for(;" "===t[t.length-1];)t=t.slice(0,-1);0!==t.length?o.model.update(e,{title:t},function(){o.view.render("editItemDone",{id:e,title:t})}):o.removeItem(e)},t.prototype.editItemCancel=function(e){var t=this;t.model.read(e,function(o){t.view.render("editItemDone",{id:e,title:o[0].title})})},t.prototype.removeItem=function(e){var t,o=this;o.model.read(function(e){t=e}),t.forEach(function(e){e.id}),o.model.remove(e,function(){o.view.render("removeItem",e)}),o._filter()},t.prototype.removeCompletedItems=function(){var e=this;e.model.read({completed:!0},function(t){t.forEach(function(t){e.removeItem(t.id)})}),e._filter()},t.prototype.toggleComplete=function(e,t,o){var i=this;i.model.update(e,{completed:t},function(){i.view.render("elementComplete",{id:e,completed:t})}),o||i._filter()},t.prototype.toggleAll=function(e){var t=this;t.model.read({completed:!e},function(o){o.forEach(function(o){t.toggleComplete(o.id,e,!0)})}),t._filter()},t.prototype._updateCount=function(){var e=this;e.model.getCount(function(t){e.view.render("updateElementCount",t.active),e.view.render("clearCompletedButton",{completed:t.completed,visible:t.completed>0}),e.view.render("toggleAll",{checked:t.completed===t.total}),e.view.render("contentBlockVisibility",{visible:t.total>0})})},t.prototype._filter=function(e){var t=this._activeRoute.charAt(0).toUpperCase()+this._activeRoute.substr(1);this._updateCount(),(e||"All"!==this._lastActiveRoute||this._lastActiveRoute!==t)&&this["show"+t](),this._lastActiveRoute=t},t.prototype._updateFilterState=function(e){this._activeRoute=e,""===e&&(this._activeRoute="All"),this._filter(),this.view.render("setFilter",e)},e.app=e.app||{},e.app.Controller=t}(window)}});